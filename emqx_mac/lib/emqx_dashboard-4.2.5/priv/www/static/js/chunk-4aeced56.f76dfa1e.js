(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4aeced56"],{"2df0":function(e,r,t){"use strict";var s=t("fbec"),a=t.n(s);a.a},"8ebf":function(e,r,t){"use strict";t.r(r);var s=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"login"},[e.isNeedAuth?t("a-card",{staticClass:"login-card emq-list-card"},[t("div",{staticClass:"split-wrapper"},[t("div",{staticClass:"logo-wrapper"}),t("div",{staticClass:"login-wrapper",attrs:{span:12}},[t("div",{staticClass:"emq-title"},[e._v("\n          "+e._s(e.$t("Base.signIn"))+"\n          "),t("div",{staticClass:"sub-title"},[e._v("\n            "+e._s(e.$t("Base.loginUserAccount"))+"\n            "),t("a",{attrs:{href:e.$t("Base.userCreate"),target:"_blank"}},[e._v("\n              "+e._s(e.$t("Base.forgetPassword"))+"\n            ")])])]),t("el-form",{ref:"record",attrs:{model:e.record,rules:e.rules,"hide-required-asterisk":"","show-message":!1},nativeOn:{keyup:function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter")?null:e.nativeLogin(r)}}},[e.loginError?t("el-alert",{attrs:{title:e.loginError,type:"error"},on:{close:function(r){e.loginError=""}}}):e._e(),t("el-form-item",{attrs:{prop:"username"}},[t("el-input",{attrs:{placeholder:e.$t("Base.userName")},model:{value:e.record.username,callback:function(r){e.$set(e.record,"username",r)},expression:"record.username"}})],1),t("el-form-item",{attrs:{prop:"password"}},[t("el-input",{attrs:{type:"password",placeholder:e.$t("Base.password")},model:{value:e.record.password,callback:function(r){e.$set(e.record,"password",r)},expression:"record.password"}})],1),t("el-checkbox",{model:{value:e.record.remember,callback:function(r){e.$set(e.record,"remember",r)},expression:"record.remember"}},[e._v(e._s(e.$t("Base.remember")))]),t("el-form-item",{staticClass:"oper-wrapper",attrs:{label:""}},[t("el-button",{staticClass:"sub-btn",attrs:{type:"primary"},on:{click:e.nativeLogin}},[e._v(e._s(e.$t("Base.signIn")))])],1)],1)],1)])]):e._e()],1)},a=[],n=(t("96cf"),t("3b8d")),o=(t("a481"),t("2934")),i=t("90b9"),l=t("a47b"),u={name:"Login",components:{},props:{},data:function(){return{record:{username:"",password:"",remember:!1},loginError:"",rules:{username:{required:!0},password:{required:!0}},isNeedAuth:!0,fullLoading:!1,fromCloud:!1}},computed:{lang:function(){return this.$store.state.lang}},created:function(){"/dashboard"===l["a"].state.config.baseURL&&(this.fromCloud=!0);var e=this.$route.query.lang;-1!==["en","zh"].indexOf(e)&&this.language!==e&&this.fromCloud&&(document.querySelector("html").setAttribute("lang",e),localStorage.setItem("language",e),this.$i18n.locale=e),this.$store.dispatch("UPDATE_USER_INFO",{logOut:!0}),this.autoLogin()},methods:{login:function(){var e=this,r=this.record,t=r.username,s=r.password,a=r.remember;Object(o["a"])({username:t,password:s}).then(function(r){r&&(e.loginError="",e.$store.dispatch("UPDATE_USER_INFO",{username:t,password:s,remember:a}),setTimeout(function(){var r=e.$route.query.to,t=void 0===r?e.fromCloud?"/users_and_acl":"/":r;e.$router.replace({path:t}),e.isNeedAuth||e.fullLoading.close()},500))}).catch(function(r){e.isNeedAuth||e.fullLoading.close(),e.isNeedAuth=!0,e.loginError=r})},nativeLogin:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(i["a"])(this.$refs.record.validate());case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:this.login();case 5:case"end":return e.stop()}},e,this)}));function r(){return e.apply(this,arguments)}return r}(),autoLogin:function(){var e=this.$route.params,r=e.username,t=e.password;this.isNeedAuth=!(r&&t),this.isNeedAuth||(this.fullLoading=this.$loading({lock:!0,text:this.$t("Base.loging"),spinner:"el-icon-loading",background:"#fff"}),this.record.username=r,this.record.password=t,this.login())}}},c=u,d=(t("2df0"),t("2877")),p=Object(d["a"])(c,s,a,!1,null,null,null);r["default"]=p.exports},fbec:function(e,r,t){}}]);