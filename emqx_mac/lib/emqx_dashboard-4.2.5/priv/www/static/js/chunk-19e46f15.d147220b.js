(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-19e46f15"],{2327:function(e,t,a){},"2bbf":function(e,t,a){},"53cc":function(e,t,a){},"5f03":function(e,t,a){"use strict";var n=a("6a76"),r=a.n(n);r.a},"6a76":function(e,t,a){},"71f9":function(e,t,a){"use strict";var n=a("2bbf"),r=a.n(n);r.a},"8f2b":function(e,t,a){"use strict";var n=a("2327"),r=a.n(n);r.a},"8fd4":function(e,t,a){"use strict";var n=a("53cc"),r=a.n(n);r.a},"9be9":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"plugin-manage"},["emqx_auth_clientid"===e.pluginName?[a("auth-clientId-table")]:e._e(),"emqx_auth_username"===e.pluginName?[a("auth-username-table")]:e._e(),"emqx_auth_mnesia"===e.pluginName?[a("auth-mnesia-table")]:e._e(),"emqx_auth_jwt"===e.pluginName?[a("generate-JWT")]:e._e()],2)},r=[],s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"auth-clientid-table"},[a("div",{staticClass:"app-wrapper"},[a("a-card",{staticClass:"emq-list-card",attrs:{loading:e.listLoading}},[a("div",{staticClass:"emq-table-header"},[a("el-row",{staticClass:"add-form",attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-input",{attrs:{size:"small",placeholder:e.$t("Clients.clientId")},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.save(t)}},model:{value:e.record.clientid,callback:function(t){e.$set(e.record,"clientid",t)},expression:"record.clientid"}})],1),a("el-col",{attrs:{span:8}},[a("el-input",{attrs:{size:"small",type:"password",placeholder:e.$t("Base.password")},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.save(t)}},model:{value:e.record.password,callback:function(t){e.$set(e.record,"password",t)},expression:"record.password"}})],1),a("div",{staticClass:"col-oper"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"small"},on:{click:e.save}},[e._v("\n              "+e._s(e.$t("Base.add"))+"\n            ")])],1)],1)],1),a("el-table",{staticClass:"data-list",attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"clientid",label:e.$t("Clients.clientId")}}),a("el-table-column",{attrs:{prop:"oper",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("el-button",{attrs:{type:"dashed",size:"mini"},on:{click:function(t){return e.showEdit(n)}}},[e._v("\n              "+e._s(e.$t("Base.edit"))+"\n            ")]),a("el-button",{attrs:{type:"dashed danger",size:"mini"},on:{click:function(t){return e.handleDelete(n)}}},[e._v("\n              "+e._s(e.$t("Base.delete"))+"\n            ")])]}}])})],1)],1)],1),a("el-dialog",{attrs:{visible:e.editVisible,width:"400px",title:e.$t("Base.edit")},on:{"update:visible":function(t){e.editVisible=t}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleEdit(t)}}},[a("el-form",{ref:"editRecord",staticClass:"el-form--public app-info",attrs:{size:"medium",rules:e.rules,model:e.editRecord}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{prop:"clientid",label:"Client ID"}},[a("el-input",{attrs:{disabled:""},model:{value:e.editRecord.clientid,callback:function(t){e.$set(e.editRecord,"clientid",t)},expression:"editRecord.clientid"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{prop:"password",label:"Password"}},[a("el-input",{attrs:{type:"password"},model:{value:e.editRecord.password,callback:function(t){e.$set(e.editRecord,"password",t)},expression:"editRecord.password"}})],1)],1)],1)],1),a("div",{staticClass:"dialog-align-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"cache-btn",attrs:{plain:"",size:"small"},on:{click:function(t){e.editVisible=!1}}},[e._v("\n        "+e._s(e.$t("Base.cancel"))+"\n      ")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.handleEdit}},[e._v("\n        "+e._s(e.$t("Base.confirm"))+"\n      ")])],1)],1)],1)},i=[],l=a("cebc"),o=(a("96cf"),a("3b8d")),c=a("c65d"),u={name:"AuthClientIdTable",data:function(){return{editVisible:!1,listLoading:!0,record:{},tableData:[],editRecord:{},rules:{clientid:{required:!0,message:this.$t("Plugins.pleaseEnter")},password:{required:!0,message:this.$t("Plugins.pleaseEnter")}}}},created:function(){this.loadData()},methods:{loadData:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(c["i"])();case 2:t=e.sent,this.tableData=t.map(function(e){return{clientid:e}}),this.listLoading=!1;case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),save:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.record.clientid&&this.record.password){e.next=3;break}return this.$message.warning(this.$t("Plugins.authClientidRequired")),e.abrupt("return");case 3:return t=Object(l["a"])({},this.record),e.next=6,Object(c["a"])(t);case 6:a=e.sent,a&&(this.loadData(),this.record={});case 8:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),handleDelete:function(e){var t=this,a=e.clientid;this.$confirm(this.$t("Plugins.confirmDelete"),this.$t("Base.warning"),{confirmButtonText:this.$t("Base.confirm"),cancelButtonText:this.$t("Base.cancel"),type:"warning"}).then(Object(o["a"])(regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(c["e"])(a);case 2:n=e.sent,n&&t.loadData();case 4:case"end":return e.stop()}},e)}))).catch(function(){})},showEdit:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var a,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.clientid,this.editVisible=!0,e.next=4,Object(c["m"])(a);case 4:n=e.sent,this.editRecord=n,this.editRecord.password="",this.$refs.editRecord.resetFields();case 8:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),handleEdit:function(){var e=this;this.$refs.editRecord.validate(function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(a){var n,r,s,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return");case 2:return n=e.editRecord,r=n.clientid,s=n.password,i={password:s},t.next=6,Object(c["s"])(r,i);case 6:e.loadData(),e.$message.success(e.$t("Base.editSuccess")),e.editRecord={},e.editVisible=!1,e.$refs.editRecord.resetFields();case 11:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())}}},d=u,p=(a("71f9"),a("2877")),h=Object(p["a"])(d,s,i,!1,null,null,null),m=h.exports,f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"auth-username-table"},[a("div",{staticClass:"app-wrapper"},[a("a-card",{staticClass:"emq-list-card",attrs:{loading:e.listLoading}},[a("div",{staticClass:"emq-table-header"},[a("el-row",{staticClass:"add-form",attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-input",{attrs:{size:"small",placeholder:e.$t("Clients.username")},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.save(t)}},model:{value:e.record.username,callback:function(t){e.$set(e.record,"username",t)},expression:"record.username"}})],1),a("el-col",{attrs:{span:8}},[a("el-input",{attrs:{size:"small",type:"password",placeholder:e.$t("Base.password")},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.save(t)}},model:{value:e.record.password,callback:function(t){e.$set(e.record,"password",t)},expression:"record.password"}})],1),a("div",{staticClass:"col-oper"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"small"},on:{click:e.save}},[e._v("\n              "+e._s(e.$t("Base.add"))+"\n            ")])],1)],1)],1),a("el-table",{staticClass:"data-list",attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"username",label:e.$t("Clients.username")}}),a("el-table-column",{attrs:{prop:"oper",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("el-button",{attrs:{type:"dashed",size:"mini"},on:{click:function(t){return e.showEdit(n)}}},[e._v("\n              "+e._s(e.$t("Base.edit"))+"\n            ")]),a("el-button",{attrs:{type:"dashed danger",size:"mini"},on:{click:function(t){return e.handleDelete(n)}}},[e._v("\n              "+e._s(e.$t("Base.delete"))+"\n            ")])]}}])})],1)],1)],1),a("el-dialog",{attrs:{visible:e.editVisible,width:"400px",title:e.$t("Base.edit")},on:{"update:visible":function(t){e.editVisible=t}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleEdit(t)}}},[a("el-form",{ref:"editRecord",staticClass:"el-form--public app-info",attrs:{size:"medium",rules:e.rules,model:e.editRecord}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{prop:"username",label:e.$t("Clients.username")}},[a("el-input",{attrs:{disabled:""},model:{value:e.editRecord.username,callback:function(t){e.$set(e.editRecord,"username",t)},expression:"editRecord.username"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{prop:"password",label:"Password"}},[a("el-input",{attrs:{type:"password"},model:{value:e.editRecord.password,callback:function(t){e.$set(e.editRecord,"password",t)},expression:"editRecord.password"}})],1)],1)],1)],1),a("div",{staticClass:"dialog-align-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"cache-btn",attrs:{plain:"",size:"small"},on:{click:function(t){e.editVisible=!1}}},[e._v("\n        "+e._s(e.$t("Base.cancel"))+"\n      ")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.handleEdit}},[e._v("\n        "+e._s(e.$t("Base.confirm"))+"\n      ")])],1)],1)],1)},g=[],b={name:"AuthUsernameTable",data:function(){return{editVisible:!1,listLoading:!0,record:{},tableData:[],editRecord:{},rules:{username:{required:!0,message:this.$t("Plugins.pleaseEnter")},password:{required:!0,message:this.$t("Plugins.pleaseEnter")}}}},created:function(){this.loadData()},methods:{loadData:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(c["j"])();case 2:t=e.sent,this.tableData=t.map(function(e){return{username:e}}),this.listLoading=!1;case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),save:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.record.username&&this.record.password){e.next=3;break}return this.$message.warning(this.$t("Plugins.authClientidRequired")),e.abrupt("return");case 3:return t=Object(l["a"])({},this.record),e.next=6,Object(c["d"])(t);case 6:a=e.sent,a&&(this.loadData(),this.record={});case 8:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),handleDelete:function(e){var t=this,a=e.username;this.$confirm(this.$t("Plugins.confirmDelete"),this.$t("Base.warning"),{confirmButtonText:this.$t("Base.confirm"),cancelButtonText:this.$t("Base.cancel"),type:"warning"}).then(Object(o["a"])(regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(c["h"])(a);case 2:n=e.sent,n&&t.loadData();case 4:case"end":return e.stop()}},e)}))).catch(function(){})},showEdit:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var a,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.username,this.editVisible=!0,e.next=4,Object(c["o"])(a);case 4:n=e.sent,this.editRecord=n,this.editRecord.password="",this.$refs.editRecord.resetFields();case 8:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),handleEdit:function(){var e=this;this.$refs.editRecord.validate(function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(a){var n,r,s,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return");case 2:return n=e.editRecord,r=n.username,s=n.password,i={password:s},t.next=6,Object(c["u"])(r,i);case 6:e.loadData(),e.$message.success(e.$t("Base.editSuccess")),e.editRecord={},e.editVisible=!1,e.$refs.editRecord.resetFields();case 11:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())}}},v=b,w=(a("8f2b"),Object(p["a"])(v,f,g,!1,null,null,null)),$=w.exports,k=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"auth-mnesia-table"},[a("div",{staticClass:"app-wrapper"},[a("a-card",{staticClass:"emq-list-card",attrs:{loading:e.listLoading}},[a("div",{staticClass:"auth"},[a("h3",[e._v(e._s(e.$t("Plugins.auth")))]),a("div",{staticClass:"emq-table-header"},[a("el-row",{staticClass:"add-form",attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-input",{attrs:{size:"small",placeholder:e.fromCloud?e.$t("Plugins.username"):e.$t("Plugins.usernameOrClientid")},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.AuthSave(t)}},model:{value:e.authRecord.login,callback:function(t){e.$set(e.authRecord,"login",t)},expression:"authRecord.login"}}),e.fromCloud?e._e():a("el-popover",{attrs:{trigger:"hover",placement:"top",content:e.$t("Plugins.mnesiaTip"),tabindex:-1}},[a("a",{staticClass:"tutorial",attrs:{slot:"reference",href:e.mnesiaDoc,target:"_blank",rel:"noopener"},slot:"reference"},[a("i",{staticClass:"iconfont icon-bangzhu"})])])],1),a("el-col",{attrs:{span:8}},[a("el-input",{attrs:{size:"small",type:"password",placeholder:e.$t("Base.password")},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.AuthSave(t)}},model:{value:e.authRecord.password,callback:function(t){e.$set(e.authRecord,"password",t)},expression:"authRecord.password"}})],1),a("div",{staticClass:"col-oper"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"small"},on:{click:e.AuthSave}},[e._v("\n                "+e._s(e.$t("Base.add"))+"\n              ")])],1)],1)],1),a("el-table",{staticClass:"data-list",attrs:{data:e.authTableData}},[a("el-table-column",{attrs:{prop:"login",label:e.fromCloud?e.$t("Plugins.username"):e.$t("Plugins.usernameOrClientid")}}),a("el-table-column",{attrs:{prop:"oper",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("el-button",{attrs:{type:"dashed",size:"mini"},on:{click:function(t){return e.showAuthEdit(n)}}},[e._v("\n                "+e._s(e.$t("Base.edit"))+"\n              ")]),a("el-button",{attrs:{type:"dashed danger",size:"mini"},on:{click:function(t){return e.handleAuthDelete(n)}}},[e._v("\n                "+e._s(e.$t("Base.delete"))+"\n              ")])]}}])})],1),a("div",{staticClass:"emq-table-footer"},[e.authCount>10?a("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next","page-sizes":[10,50,100,500],"page-size":e.authParams._limit,"current-page":e.authParams._page,total:e.authCount},on:{"update:pageSize":function(t){return e.$set(e.authParams,"_limit",t)},"update:page-size":function(t){return e.$set(e.authParams,"_limit",t)},"update:currentPage":function(t){return e.$set(e.authParams,"_page",t)},"update:current-page":function(t){return e.$set(e.authParams,"_page",t)},"size-change":e.handleAuthSizeChange,"current-change":e.handleAuthCurrentPageChange}}):e._e()],1)],1),a("div",{staticClass:"acl"},[a("h3",[e._v("ACL")]),a("div",{staticClass:"emq-table-header"},[a("el-row",{staticClass:"add-form",attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-autocomplete",{attrs:{size:"small","value-key":"label","fetch-suggestions":e.queryACLSearch,placeholder:e.fromCloud?e.$t("Plugins.username"):e.$t("Plugins.usernameOrClientid")},on:{select:e.handleACLSelect},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.ACLSave(t)}},model:{value:e.aclRecord.login,callback:function(t){e.$set(e.aclRecord,"login",t)},expression:"aclRecord.login"}}),e.fromCloud?e._e():a("el-popover",{attrs:{trigger:"hover",placement:"top",content:e.$t("Plugins.mnesiaTip"),tabindex:-1}},[a("a",{staticClass:"tutorial",attrs:{slot:"reference",href:e.mnesiaDoc,target:"_blank",rel:"noopener"},slot:"reference"},[a("i",{staticClass:"iconfont icon-bangzhu"})])])],1),a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{size:"small",placeholder:e.$t("Topics.topic")},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.ACLSave(t)}},model:{value:e.aclRecord.topic,callback:function(t){e.$set(e.aclRecord,"topic",t)},expression:"aclRecord.topic"}})],1),a("el-col",{attrs:{span:4}},[a("emq-select",{attrs:{size:"small",field:{options:e.allowOptions}},model:{value:e.aclRecord.allow,callback:function(t){e.$set(e.aclRecord,"allow",t)},expression:"aclRecord.allow"}})],1),a("el-col",{attrs:{span:4}},[a("emq-select",{attrs:{size:"small",field:{options:e.actionOptions}},model:{value:e.aclRecord.action,callback:function(t){e.$set(e.aclRecord,"action",t)},expression:"aclRecord.action"}})],1),a("div",{staticClass:"col-oper"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"small"},on:{click:e.ACLSave}},[e._v("\n                "+e._s(e.$t("Base.add"))+"\n              ")])],1)],1)],1),a("el-table",{staticClass:"data-list",attrs:{data:e.aclTableData}},[a("el-table-column",{attrs:{prop:"login",label:e.fromCloud?e.$t("Plugins.username"):e.$t("Plugins.usernameOrClientid")}}),a("el-table-column",{attrs:{prop:"topic",label:e.$t("Topics.topic")}}),a("el-table-column",{attrs:{prop:"action",label:e.$t("Plugins.action")}}),a("el-table-column",{attrs:{prop:"allow",label:e.$t("Plugins.isAllow")},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v("\n              "+e._s(a.allow?e.$t("Plugins.allow"):e.$t("Plugins.deny"))+"\n            ")]}}])}),a("el-table-column",{attrs:{prop:"oper",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("el-button",{attrs:{type:"dashed danger",size:"mini"},on:{click:function(t){return e.handleACLDelete(n)}}},[e._v("\n                "+e._s(e.$t("Base.delete"))+"\n              ")])]}}])})],1),a("div",{staticClass:"emq-table-footer"},[e.aclCount>10?a("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next","page-sizes":[10,50,100,500],"page-size":e.aclParams._limit,"current-page":e.aclParams._page,total:e.aclCount},on:{"update:pageSize":function(t){return e.$set(e.aclParams,"_limit",t)},"update:page-size":function(t){return e.$set(e.aclParams,"_limit",t)},"update:currentPage":function(t){return e.$set(e.aclParams,"_page",t)},"update:current-page":function(t){return e.$set(e.aclParams,"_page",t)},"size-change":e.handleACLSizeChange,"current-change":e.handleACLCurrentPageChange}}):e._e()],1)],1)])],1),a("el-dialog",{attrs:{visible:e.editVisible,width:"400px",title:e.$t("Base.edit")},on:{"update:visible":function(t){e.editVisible=t}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleAuthEdit(t)}}},[a("el-form",{ref:"editRecord",staticClass:"el-form--public app-info",attrs:{size:"medium",rules:e.rules,model:e.editRecord}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{prop:"login",label:e.fromCloud?e.$t("Plugins.username"):e.$t("Plugins.usernameOrClientid")}},[a("el-input",{attrs:{disabled:""},model:{value:e.editRecord.login,callback:function(t){e.$set(e.editRecord,"login",t)},expression:"editRecord.login"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{prop:"password",label:"Password"}},[a("el-input",{attrs:{type:"password"},model:{value:e.editRecord.password,callback:function(t){e.$set(e.editRecord,"password",t)},expression:"editRecord.password"}})],1)],1)],1)],1),a("div",{staticClass:"dialog-align-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"cache-btn",attrs:{plain:"",size:"small"},on:{click:function(t){e.editVisible=!1}}},[e._v("\n        "+e._s(e.$t("Base.cancel"))+"\n      ")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.handleAuthEdit}},[e._v("\n        "+e._s(e.$t("Base.confirm"))+"\n      ")])],1)],1)],1)},y=[],_=a("90b9"),C=a("a47b"),x={name:"AuthMnesiaTable",data:function(){return{editVisible:!1,listLoading:!0,authRecord:{is_superuser:!1},aclRecord:{action:"pubsub",allow:!0},authTableData:[],aclTableData:[],editRecord:{},rules:{login:{required:!0,message:this.$t("Plugins.pleaseEnter")},password:{required:!0,message:this.$t("Plugins.pleaseEnter")}},authParams:{_page:1,_limit:10},authCount:0,aclParams:{_page:1,_limit:10},aclCount:0,allowOptions:[{label:this.$t("Plugins.allow"),value:!0},{label:this.$t("Plugins.deny"),value:!1}],actionOptions:[{label:"pub",value:"pub"},{label:"sub",value:"sub"},{label:"pubsub",value:"pubsub"}],fromCloud:!1}},computed:{mnesiaDoc:function(){return Object(_["g"])("mnesia")}},created:function(){"/dashboard"===C["a"].state.config.baseURL&&(this.fromCloud=!0),this.loadMnesia(),this.loadACL()},methods:{loadMnesia:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var a,n,r,s,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t&&(this.authParams._page=1),e.next=3,Object(c["k"])(Object(l["a"])({},this.authParams));case 3:a=e.sent,n=a.items,r=void 0===n?[]:n,s=a.meta.count,i=void 0===s?0:s,this.authTableData=r,this.authCount=i,this.listLoading=!1;case 8:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),AuthSave:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.authRecord.login&&this.authRecord.password){e.next=3;break}return this.$message.warning(this.$t("Plugins.authMnesiaRequired")),e.abrupt("return");case 3:return t=Object(l["a"])({},this.authRecord),e.next=6,Object(c["b"])(t);case 6:a=e.sent,a&&(this.loadMnesia(),this.authRecord={is_superuser:!1});case 8:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),handleAuthDelete:function(e){var t=this,a=e.login;this.$confirm(this.$t("Plugins.confirmDelete"),this.$t("Base.warning"),{confirmButtonText:this.$t("Base.confirm"),cancelButtonText:this.$t("Base.cancel"),type:"warning"}).then(Object(o["a"])(regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(c["f"])(a);case 2:n=e.sent,n&&t.loadMnesia(!0);case 4:case"end":return e.stop()}},e)}))).catch(function(){})},showAuthEdit:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var a,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.login,this.editVisible=!0,e.next=4,Object(c["n"])(a);case 4:n=e.sent,this.editRecord=n,this.editRecord.password="",this.$refs.editRecord.resetFields();case 8:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),handleAuthEdit:function(){var e=this;this.$refs.editRecord.validate(function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(a){var n,r,s,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return");case 2:return n=e.editRecord,r=n.login,s=n.password,i={password:s,is_superuser:!1},t.next=6,Object(c["t"])(r,i);case 6:e.loadMnesia(),e.$message.success(e.$t("Base.editSuccess")),e.editRecord={},e.editVisible=!1,e.$refs.editRecord.resetFields();case 11:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())},handleAuthSizeChange:function(){this.loadMnesia(!0)},handleAuthCurrentPageChange:function(){this.loadMnesia()},loadACL:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var a,n,r,s,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t&&(this.aclParams._page=1),e.next=3,Object(c["l"])(Object(l["a"])({},this.aclParams));case 3:a=e.sent,n=a.items,r=void 0===n?[]:n,s=a.meta.count,i=void 0===s?0:s,this.aclTableData=r,this.aclCount=i,this.listLoading=!1;case 8:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),ACLSave:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.aclRecord.login&&this.aclRecord.topic){e.next=3;break}return this.$message.warning(this.$t("Plugins.aclMnesiaRequired")),e.abrupt("return");case 3:return t=Object(l["a"])({},this.aclRecord),t.allow="false"!==this.aclRecord.allow,e.next=7,Object(c["c"])(t);case 7:a=e.sent,a&&(this.loadACL(),this.aclRecord={action:"pubsub",allow:!0});case 9:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),handleACLDelete:function(e){var t=this,a=e.login,n=e.topic;this.$confirm(this.$t("Plugins.confirmDelete"),this.$t("Base.warning"),{confirmButtonText:this.$t("Base.confirm"),cancelButtonText:this.$t("Base.cancel"),type:"warning"}).then(Object(o["a"])(regeneratorRuntime.mark(function e(){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(c["g"])(a,n);case 2:r=e.sent,r&&t.loadACL(!0);case 4:case"end":return e.stop()}},e)}))).catch(function(){})},queryACLSearch:function(e,t){var a=[{value:"$all",label:this.$t("Plugins.allUsers")}];t(a)},handleACLSelect:function(e){this.aclRecord.login=e.value},handleACLSizeChange:function(){this.loadACL(!0)},handleACLCurrentPageChange:function(){this.loadACL()}}},R=x,O=(a("5f03"),Object(p["a"])(R,k,y,!1,null,null,null)),P=O.exports,j=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"generate-jwt"},[a("div",{staticClass:"app-wrapper"},[a("a-card",{staticClass:"emq-list-card"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:14}},[a("el-form",{ref:"record",attrs:{model:e.record,rules:e.rules}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"alg"}},[a("emq-select",{staticClass:"el-select--public",attrs:{size:"small","popper-class":"el-select--public",field:{list:e.algsOptions},placeholder:e.$t("Plugins.algorithm")},model:{value:e.record.alg,callback:function(t){e.$set(e.record,"alg",t)},expression:"record.alg"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"secret"}},[a("el-input",{attrs:{placeholder:e.$t("Plugins.secret"),size:"small"},model:{value:e.record.secret,callback:function(t){e.$set(e.record,"secret",t)},expression:"record.secret"}})],1)],1)],1),a("el-form-item",[a("el-checkbox",{attrs:{size:"small"},model:{value:e.payloadVisible,callback:function(t){e.payloadVisible=t},expression:"payloadVisible"}},[e._v("Payload")])],1),e.payloadVisible?[a("p",{staticClass:"jwt-payload-desc"},[e._v("\n                "+e._s(e.$t("Plugins.payloadDesc"))+"\n                "),a("a",{attrs:{href:e.jwtDoc,target:"_blank",rel:"noopener"}},[e._v(e._s(e.$t("Plugins.jwtDoc")))])]),a("el-form-item",{attrs:{prop:"payload"}},[a("div",{staticClass:"monaco-container",staticStyle:{height:"200px"}},[a("monaco",{attrs:{id:"jwt-payload",lang:"json"},model:{value:e.record.payload,callback:function(t){e.$set(e.record,"payload",t)},expression:"record.payload"}})],1)]),a("p",{staticClass:"jwt-payload-desc"},[e._v("\n                "+e._s(e.$t("Plugins.dataDesc"))+"\n              ")]),a("el-form-item",{attrs:{prop:"data"}},[a("div",{staticClass:"monaco-container",staticStyle:{height:"200px"}},[a("monaco",{attrs:{id:"jwt-data",lang:"plaintext"},model:{value:e.record.data,callback:function(t){e.$set(e.record,"data",t)},expression:"record.data"}})],1)])]:e._e(),a("el-form-item",{attrs:{prop:"expired"}},[a("el-date-picker",{attrs:{"picker-options":e.pickerOptions,placeholder:e.$t("General.neverExpire"),"value-format":"timestamp",size:"small"},model:{value:e.record.expired,callback:function(t){e.$set(e.record,"expired",t)},expression:"record.expired"}})],1),a("el-button",{staticClass:"add",attrs:{type:"primary",size:"small"},on:{click:e.save}},[e._v("\n              "+e._s(e.$t("Base.generate"))+"\n            ")])],2)],1)],1),a("el-table",{attrs:{data:e.records}},[a("el-table-column",{attrs:{prop:"username",label:"Username"}}),a("el-table-column",{attrs:{prop:"clientid",label:"Client ID"}}),a("el-table-column",{attrs:{"min-width":"160px",prop:"token",label:"token","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{width:"120px"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:cpoy",value:n.token,expression:"row.token",arg:"cpoy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.copySuccessed,expression:"copySuccessed",arg:"success"}],attrs:{type:"dashed",size:"mini",icon:"el-icon-document-copy"}},[e._v("\n              "+e._s(e.$t("Base.copy"))+"\n            ")])]}}])})],1)],1)],1)])},B=[],z=(a("a481"),a("768b")),D=(a("28a5"),a("14b7")),S=a.n(D),A=a("9146"),q={name:"GenerateJwt",components:{Monaco:A["a"]},data:function(){return{record:{alg:"HS256",payload:JSON.stringify({username:"%u",clientid:"%c"},null,2),data:""},rules:{secret:{required:!0,message:this.$t("Plugins.secretRequired")},payload:{required:!0,message:this.$t("Plugins.payloadRequired")},data:{required:!0,message:this.$t("Plugins.dataRequired")}},algsOptions:["HS256","HS384","HS512","RS256","RS384","RS512","ES256","ES384","ES512"],payloadVisible:!1,pickerOptions:{disabledDate:function(e){return e.getTime()<Date.now()-864e5},shortcuts:[{text:"180 ".concat(this.$tc("Base.day",180)),onClick:function(e){var t=new Date;t.setTime(t.getTime()+15552e6),e.$emit("pick",t)}},{text:"1 ".concat(this.$tc("Base.year",1)),onClick:function(e){var t=new Date;t.setTime(t.getTime()+31536e6),e.$emit("pick",t)}},{text:"3 ".concat(this.$tc("Base.year",3)),onClick:function(e){var t=new Date;t.setTime(t.getTime()+94608e6),e.$emit("pick",t)}}]},records:[]}},computed:{jwtDoc:function(){return Object(_["g"])("authJWT")}},methods:{save:function(){var e=this;this.$refs.record.validate(function(t){t&&(e.payloadVisible?e.records=e.getPayloadJWTData(e.record.payload,e.record.data):e.records=e.getPrivateKeyJWTData())})},getPayloadJWTData:function(e,t){var a=this,n=JSON.stringify(e);return t.split("\n").map(function(t){var r=t.split(","),s=Object(z["a"])(r,2),i=s[0],l=void 0===i?"":i,o=s[1],c=void 0===o?"":o;n=e.replace(/%u/g,l).replace(/%c/g,c);var u=JSON.parse(n),d={algorithm:a.record.alg};a.record.expired&&(u.exp=a.record.expired/1e3);var p=S.a.sign(u,a.record.secret,d);return{username:l,clientid:c,token:p}})},getPrivateKeyJWTData:function(){var e={};this.record.expired&&(e.exp=this.record.expired/1e3);var t=S.a.sign(e,this.record.secret,{algorithm:this.record.alg});return[{clientid:"",username:"",token:t}]},copySuccessed:function(){this.$message.success(this.$t("Base.copied"))}}},E=q,T=(a("8fd4"),Object(p["a"])(E,j,B,!1,null,null,null)),L=T.exports,V={name:"PluginsManage",components:{AuthClientIdTable:m,AuthUsernameTable:$,AuthMnesiaTable:P,GenerateJWT:L},data:function(){return{pluginName:this.$route.params.pluginName||"emqx_auth_mnesia"}},beforeRouteLeave:function(e,t,a){"emqx_auth_jwt"===this.pluginName?this.$confirm(this.$t("Plugins.leaveTokenPage"),this.$t("Base.warning"),{confirmButtonText:this.$t("Base.confirm"),cancelButtonText:this.$t("Base.cancel"),type:"warning"}).then(function(){a()}).catch(function(){}):a()}},J=V,M=Object(p["a"])(J,n,r,!1,null,null,null);t["default"]=M.exports},c65d:function(e,t,a){"use strict";a.d(t,"p",function(){return r}),a.d(t,"q",function(){return s}),a.d(t,"r",function(){return i}),a.d(t,"i",function(){return l}),a.d(t,"a",function(){return o}),a.d(t,"e",function(){return c}),a.d(t,"m",function(){return u}),a.d(t,"s",function(){return d}),a.d(t,"j",function(){return p}),a.d(t,"d",function(){return h}),a.d(t,"h",function(){return m}),a.d(t,"o",function(){return f}),a.d(t,"u",function(){return g}),a.d(t,"k",function(){return b}),a.d(t,"b",function(){return v}),a.d(t,"f",function(){return w}),a.d(t,"n",function(){return $}),a.d(t,"t",function(){return k}),a.d(t,"l",function(){return y}),a.d(t,"c",function(){return _}),a.d(t,"g",function(){return C});var n=a("1f75");function r(e){return n["a"].get("/nodes/".concat(e,"/plugins"))}function s(e){return n["a"].put("/plugins/".concat(e,"/reload"))}function i(e){return n["a"].put("/plugins/".concat(e,"/unload"))}function l(){return n["a"].get("/auth_clientid")}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post("/auth_clientid",e)}function c(e){return n["a"].delete("/auth_clientid/".concat(e))}function u(e){return n["a"].get("/auth_clientid/".concat(e))}function d(e,t){return n["a"].put("/auth_clientid/".concat(e),t)}function p(){return n["a"].get("/auth_username")}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post("/auth_username",e)}function m(e){return n["a"].delete("/auth_username/".concat(e))}function f(e){return n["a"].get("/auth_username/".concat(e))}function g(e,t){return n["a"].put("/auth_username/".concat(e),t)}function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].get("/auth_user",{params:e})}function v(e){return n["a"].post("/auth_user",e)}function w(e){return n["a"].delete("/auth_user/".concat(encodeURIComponent(e)))}function $(e){return n["a"].get("/auth_user/".concat(encodeURIComponent(e)))}function k(e,t){return n["a"].put("/auth_user/".concat(encodeURIComponent(e)),t)}function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].get("/emqx_acl",{params:e})}function _(e){return n["a"].post("/emqx_acl",e)}function C(e,t){return n["a"].delete("/emqx_acl/".concat(encodeURIComponent(e),"/").concat(encodeURIComponent(t)))}}}]);