(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-59e5d464"],{"4aed":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"node"},[s("page-header",[s("div",{staticClass:"page-header-title-view"},[s("div",{staticClass:"title"},[e._v(e._s(e.name))])]),s("div",{staticClass:"page-header-content-view"},[s("div",{staticClass:"content"},[s("p",{staticClass:"description"},[e._v("\n          "+e._s(e.$t("Overview.currentNodeInfo"))+"\n        ")])])])]),s("div",{staticClass:"app-wrapper"},[s("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.handleTabClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[s("el-tab-pane",{attrs:{label:e.$t("Overview.basicInfo"),name:"basic"}},[s("div",{staticClass:"card-wrapper"},[s("a-card",{staticClass:"emq-list-card"},[s("div",{staticClass:"emq-title"},[e._v(e._s(e.$t("Overview.basic")))]),s("node-basic-card",{attrs:{value:e.record,"show-button":!1}})],1),s("a-card",{staticClass:"emq-list-card"},[s("div",{staticClass:"emq-title"},[e._v("\n              "+e._s(e.$t("Overview.listener"))+"\n              "),s("div",{staticClass:"sub-title"},[e._v("\n                "+e._s(e.$t("Overview.ListeningPorts"))+"\n              ")])]),s("el-table",{attrs:{data:e.listeners}},[s("el-table-column",{attrs:{prop:"protocol","min-width":"100px",label:e.$t("Overview.listenerProtocol")}}),s("el-table-column",{attrs:{prop:"listen_on","min-width":"80px",label:e.$t("Overview.listenerAddress")}}),s("el-table-column",{attrs:{prop:"acceptors","min-width":"60px",label:"Acceptors"}}),s("el-table-column",{attrs:{prop:"current_conns","min-width":"120px",label:e.$t("Overview.connectCurrentAndMax")},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.row;return[e._v(" "+e._s(s.current_conns)+" / "+e._s(s.max_conns)+" ")]}}])})],1)],1)],1)]),s("el-tab-pane",{attrs:{label:e.$t("Overview.metric"),name:"metrics"}},[s("div",{staticClass:"card-wrapper"},[s("a-card",{staticClass:"emq-list-card"},[s("div",{staticClass:"emq-title"},[e._v("\n              "+e._s(e.$t("Overview.dataList"))+"\n              "),s("div",{staticClass:"sub-title"},[e._v("\n                "+e._s(e.$t("Overview.packetStatisticsOfNodes"))+"\n              ")])]),s("el-row",{staticClass:"stats-row",attrs:{gutter:30}},[s("el-col",{attrs:{span:8}},[s("el-table",{attrs:{data:e.metricsData.client}},[s("el-table-column",{attrs:{prop:"key",label:e.$t("Overview.client"),"min-width":"100px"}}),s("el-table-column",{attrs:{prop:"value",label:"",width:"120px",sortable:""}})],1)],1),s("el-col",{attrs:{span:8}},[s("el-table",{attrs:{data:e.metricsData.delivery}},[s("el-table-column",{attrs:{prop:"key",label:"Delivery","min-width":"100px"}}),s("el-table-column",{attrs:{prop:"value",label:"",width:"120px",sortable:""}})],1)],1),s("el-col",{attrs:{span:8}},[s("el-table",{attrs:{data:e.metricsData.session}},[s("el-table-column",{attrs:{prop:"key",label:e.$t("Overview.session"),"min-width":"100px"}}),s("el-table-column",{attrs:{prop:"value",label:"",width:"120px",sortable:""}})],1)],1)],1),s("el-row",{staticClass:"stats-row",attrs:{gutter:30}},[s("el-col",{attrs:{span:8}},[s("el-table",{attrs:{data:e.metricsData.packets}},[s("el-table-column",{attrs:{prop:"key",label:e.$t("Overview.mqttPackages"),"min-width":"100px"}}),s("el-table-column",{attrs:{prop:"value",label:"",width:"120px",sortable:""}})],1)],1),s("el-col",{attrs:{span:8}},[s("el-table",{attrs:{data:e.metricsData.messages}},[s("el-table-column",{attrs:{prop:"key",label:e.$t("Overview.messageNumber"),"min-width":"100px"}}),s("el-table-column",{attrs:{prop:"value",label:"",width:"120px",sortable:""}})],1)],1),s("el-col",{attrs:{span:8}},[s("el-table",{attrs:{data:e.metricsData.bytes}},[s("el-table-column",{attrs:{prop:"key",label:e.$t("Overview.traffic"),"min-width":"100px"}}),s("el-table-column",{attrs:{prop:"value",label:"",width:"120px",sortable:""}})],1)],1)],1)],1)],1)])],1)],1)],1)},r=[],n=(s("96cf"),s("3b8d")),c=s("75fc"),i=(s("a481"),s("28a5"),s("768b")),o=(s("ac6a"),s("ffc1"),s("7f7f"),s("640a")),l=s("6212"),u={name:"Node",components:{NodeBasicCard:l["a"]},props:{},data:function(){return{activeName:"basic",record:{},metrics:{},listeners:[]}},computed:{name:function(){return this.$route.query.name},metricsData:function(){var e=this.metrics||{},t=Object.entries(e);if(0===t.length)return{packets:[],messages:[],bytes:[],client:[],session:[],delivery:[]};var s={packets:["received","sent","connect","connack","auth","disconnect.sent","disconnect.received","pingreq","pingresp","publish.received","publish.sent","puback.received","puback.sent","puback.missed","pubcomp.received","pubcomp.sent","pubcomp.missed","pubrec.received","pubrec.sent","pubrec.missed","pubrel.received","pubrel.sent","pubrel.missed","subscribe","suback","unsubscribe","unsuback"],messages:["received","sent","dropped","retained","qos0.received","qos0.sent","qos1.received","qos1.sent","qos2.received","qos2.expired","qos2.sent","qos2.dropped"],bytes:["received","sent"],client:["connected","authenticate","auth.anonymous","check_acl","subscribe","unsubscribe","disconnected"],session:["created","resumed","takeovered","discarded","terminated"],delivery:["dropped","dropped.no_local","dropped.too_large","dropped.qos0_msg","dropped.queue_full","dropped.expired"]},a={packets:{},messages:{},bytes:{},client:{},session:{},delivery:{}};function r(e){var t=[];s[e].forEach(function(s){var r=a[e][s];r&&(t.push({key:s,value:r}),delete a[e][s])});var r=Object.entries(a[e]).map(function(e){var t=Object(i["a"])(e,2),s=t[0],a=t[1];return{key:s,value:a}});return[].concat(t,Object(c["a"])(r))}return t.forEach(function(e){var t=Object(i["a"])(e,2),s=t[0],r=t[1],n=s.split(".").shift(),c=s.replace("".concat(n,"."),"");a[n]=a[n]||{},a[n][c]=r}),{packets:r("packets"),messages:r("messages"),bytes:r("bytes"),client:r("client"),session:r("session"),delivery:r("delivery")}}},created:function(){this.loadData()},methods:{handleTabClick:function(){},loadData:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o["g"])(this.name);case 2:return this.record=e.sent,e.next=5,Object(o["e"])(this.name);case 5:return this.metrics=e.sent,e.next=8,Object(o["d"])(this.name);case 8:this.listeners=e.sent;case 9:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}},d=u,p=(s("551a"),s("2877")),m=Object(p["a"])(d,a,r,!1,null,null,null);t["default"]=m.exports},"551a":function(e,t,s){"use strict";var a=s("7bfa"),r=s.n(a);r.a},6212:function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"node-basic-card"},[s("div",{staticClass:"version-wrapper"},[s("div",{staticClass:"version-title"},[e._v(e._s(e.$t("Overview.version"))+": "+e._s(e.record.version))])]),s("div",{staticClass:"basic-info"},[s("el-row",[s("el-form",{staticClass:"node-form",attrs:{"label-suffix":":","label-position":"left","label-width":"150px"}},[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:e.$t("Overview.systemTime")}},[s("span",{staticClass:"form-item-value"},[e._v(e._s(e.record.datetime))])])],1),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:e.$t("Overview.memory")}},[s("span",{staticClass:"form-item-value"},[e._v("\n              "+e._s(e._f("formatMemory")(e.record.memory_used))+" / "+e._s(e._f("formatMemory")(e.record.memory_total))+"\n            ")])])],1),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:e.$t("Overview.uptime")}},[s("span",{staticClass:"form-item-value"},[e._v(e._s(e.record.uptime))])])],1),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:e.$t("Overview.maxFds")}},[s("span",{staticClass:"form-item-value"},[e._v(e._s(e.record.max_fds))])])],1),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"OTP Release"}},[s("span",{staticClass:"form-item-value"},[e._v(e._s(e.record.otp_release))])])],1),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"Erlang "+e.$t("Overview.process")}},[s("span",{staticClass:"form-item-value"},[e._v(e._s(e.record.process_used)+" / "+e._s(e.record.process_available))])])],1),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:e.$t("Overview.nodeState")}},[s("span",{staticClass:"form-item-value"},[s("a-badge",{attrs:{"is-dot":"",status:"Running"===e.record.node_status?"success":"error",text:"Running"===e.record.node_status?e.$t("Overview.running"):e.$t("Overview.stopped")}})],1)])],1),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"CPU "+e.$t("Overview.load")}},[s("span",{staticClass:"form-item-value"},[e._v(" "+e._s(e.record.load1)+" / "+e._s(e.record.load5)+" / "+e._s(e.record.load15)+" ")]),s("el-popover",{attrs:{trigger:"hover",content:"load1/load5/load15"}},[s("i",{staticClass:"el-icon-question",attrs:{slot:"reference"},slot:"reference"})])],1)],1),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:e.$t("Overview.currentConnection")}},[s("span",{staticClass:"form-item-value"},[e._v(" "+e._s(e.record["connections.count"])+" / "+e._s(e.record["connections.max"])+" ")])])],1),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:e.$t("Overview.topics")}},[s("span",{staticClass:"form-item-value"},[e._v(" "+e._s(e.record["topics.count"])+" / "+e._s(e.record["topics.max"])+" ")])])],1),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:e.$t("Overview.subscription")}},[s("span",{staticClass:"form-item-value"},[e._v("\n              "+e._s(e.record["subscriptions.count"])+" / "+e._s(e.record["subscriptions.max"])+"\n            ")])])],1),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:e.$t("Overview.retained")}},[s("span",{staticClass:"form-item-value"},[e._v(" "+e._s(e.record["retained.count"])+" / "+e._s(e.record["retained.max"])+" ")])])],1),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:e.$t("Overview.shareSubscription")}},[s("span",{staticClass:"form-item-value"},[e._v("\n              "+e._s(e.record["subscriptions.shared.count"])+" / "+e._s(e.record["subscriptions.shared.max"])+"\n            ")])])],1)],1)],1),e.showButton?s("el-button",{staticClass:"form-btn",attrs:{type:"primary",size:"small"},on:{click:e.toDetails}},[e._v("\n      "+e._s(e.$t("Overview.viewMore"))+"\n    ")]):e._e()],1)])},r=[],n=s("90b9"),c={name:"NodeBasicCard",components:{},filters:{formatMemory:function(e){return"number"===typeof e?Object(n["d"])(e):e}},props:{value:{type:Object,default:function(){return{}}},showButton:{type:Boolean,default:!0}},data:function(){return{data:{datetime:"2019-07-08 16:27:14",node:"emqx@127.0.0.1",node_status:"Running",otp_release:"R21/10.3.4",sysdescr:"EMQ X Broker",uptime:"2 days,6 hours, 47 minutes, 50 seconds",version:"0.0.0+build.1.ref6ab9527","subscriptions.shared.max":0,"subscriptions.max":102,"subscribers.max":102,"resources.max":2,"topics.count":1,"subscriptions.count":62,"suboptions.max":102,"topics.max":2,"sessions.persistent.max":0,"connections.max":102,"sessions.persistent.count":0,"actions.count":17,"retained.count":4,"rules.count":1,"routes.count":1,"subscriptions.shared.count":0,"suboptions.count":62,"sessions.count":62,"actions.max":17,"retained.max":4,"sessions.max":102,"rules.max":1,"routes.max":2,"resources.count":2,"subscribers.count":62,"connections.count":62,connections:77,load1:"9.41",load15:"10.59",load5:"10.77",max_fds:7168,memory_total:"1.14G",memory_used:"415.58M",name:"emqx@127.0.0.1",process_available:2097152,process_used:538}}},computed:{record:function(){return this.value}},created:function(){},methods:{toDetails:function(){this.$router.push({path:"/monitor/node",query:{name:this.record.node}})}}},i=c,o=(s("a2c2"),s("2877")),l=Object(o["a"])(i,a,r,!1,null,null,null);t["a"]=l.exports},"640a":function(e,t,s){"use strict";s.d(t,"h",function(){return o}),s.d(t,"b",function(){return u}),s.d(t,"c",function(){return d}),s.d(t,"f",function(){return p}),s.d(t,"e",function(){return m}),s.d(t,"d",function(){return v}),s.d(t,"g",function(){return b}),s.d(t,"a",function(){return _});var a=s("cebc"),r=(s("a481"),s("ac6a"),s("456d"),s("96cf"),s("3b8d")),n=s("1f75");function c(){return n["a"].get("/brokers")}function i(){return n["a"].get("/stats")}function o(){return l.apply(this,arguments)}function l(){return l=Object(r["a"])(regeneratorRuntime.mark(function e(){var t,s,r,o,l;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c();case 2:return t=e.sent,e.next=5,i();case 5:return s=e.sent,r={},t.forEach(function(e){r[e.node]=e}),o={},s.forEach(function(e){o[e.node]=e}),e.next=12,n["a"].get("/nodes");case 12:return l=e.sent,e.abrupt("return",l.map(function(e){var t=r[e.node]||{},s=o[e.node]||{};return Object(a["a"])({},t,s,e)}));case 14:case"end":return e.stop()}},e)})),l.apply(this,arguments)}function u(){return n["a"].get("/monitor/current_metrics")}function d(){return n["a"].get("/license_info")}function p(e,t){return!e&&t&&"basic"!==t?n["a"].get("/monitor/metrics/".concat(t)):e&&!t?n["a"].get("/nodes/".concat(e,"/monitor/metrics")):e&&t&&"basic"!==t?n["a"].get("/nodes/".concat(e,"/monitor/metrics/").concat(t)):n["a"].get("/monitor/metrics")}function m(e){return n["a"].get("/nodes/".concat(e,"/metrics"))}function v(e){return n["a"].get("/nodes/".concat(e,"/listeners"))}function b(e){return f.apply(this,arguments)}function f(){return f=Object(r["a"])(regeneratorRuntime.mark(function e(t){var s,r,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n["a"].get("/brokers/".concat(t));case 2:return s=e.sent,e.next=5,n["a"].get("/nodes/".concat(t));case 5:return r=e.sent,e.next=8,n["a"].get("/nodes/".concat(t,"/stats"));case 8:return c=e.sent,e.abrupt("return",Object(a["a"])({},s,c,r));case 10:case"end":return e.stop()}},e)})),f.apply(this,arguments)}function _(){return h.apply(this,arguments)}function h(){return h=Object(r["a"])(regeneratorRuntime.mark(function e(){var t,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t={client:{authSuccess:0,authFailed:0,connectSuccess:0},message:{received:0,sent:0,dropped:0},messageDrop:{expired:0,noSubscribers:0}},e.next=3,n["a"].get("/metrics");case 3:return s=e.sent,s.forEach(function(e){var s=e.metrics;t.client.connectSuccess+=s["client.connected"],t.client.authSuccess+=s["client.auth.success"],t.client.authFailed+=s["client.auth.failure"],t.message.received+=s["messages.received"],t.message.sent+=s["messages.sent"],t.message.dropped+=s["messages.dropped"],t.messageDrop.expired+=s["messages.dropped.expired"],t.messageDrop.noSubscribers+=s["messages.dropped.no_subscribers"]}),e.abrupt("return",t);case 6:case"end":return e.stop()}},e)})),h.apply(this,arguments)}},"7bfa":function(e,t,s){},a100:function(e,t,s){},a2c2:function(e,t,s){"use strict";var a=s("a100"),r=s.n(a);r.a}}]);